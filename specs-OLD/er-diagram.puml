@startuml
title Deals & Merchants ER Diagram

hide circle
skinparam entity {
  BackgroundColor #f5f5f5
  BorderColor #666666
  FontColor #333333
}

entity "Deal" as Deal {
  *PK: DEAL#<DealId>
  *SK: DEAL#<DealId>
  --
  GSI1PK: DEALS#<TruncatedTimestamp>
  GSI1SK: DEAL#<DealId>
  --
  Type: string (required)
  DealId: string (required)
  Title: string (required)
  Brand: string (required)
  LogoFileKey: string (required)
  Cat: "Food & Drink" | "Bathroom" | "Jewelery" | "Sports" | "Tech" | "Auto" | "Entertainment" | "Travel"
  Price: number (required)
  Date: date (required)
}

entity "Page" as Page {
  *PK
  *SK
  --
  products: [Product, ...]
}

entity "Message" as Message {
  *PK
  *SK
  --
  ID: string (MerchantId)
  Name: string (MerchantName)
}

entity "Category" as Category {
  *PK
  *SK
  --
  ID: string (CategoryId)
  Name: string
}

entity "Featured Deal" as FeaturedDeal {
  *PK
  *SK
  --
  ID: string (DealId)
  Name: string (DealName)
}

entity "User" as User {
  *PK
  *SK
  --
  ID: string (UserId)
  Name: string
}

entity "Merchant" as Merchant {
  *PK: MERCHANT#<MerchantId>
  *SK: MERCHANT#<MerchantId>
  --
  ID: string (MerchantId)
  Name: string
}

Category ||--o{ Deal : "has / belongs to"
Category ||--o{ FeaturedDeal : "has featured"
Merchant ||--o{ Deal : "has / belongs to"
Page ||--o{ FeaturedDeal : "has / appears in"
Deal ||--o{ FeaturedDeal : "can be featured"
User ||--o{ Message : "has"
Message }o--|| Page : "belongs to"
Message }o--|| Merchant : "references"
User }o--o{ Merchant : "watches / likes"
User }o--o{ Category : "watches / likes"
@enduml
